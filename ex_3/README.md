# Ex3

* 进程调度

## 短进程优先（SPF）调度算法

该算法是指在进程调度时，系统按照进程需要的执行时间长短来进行调度，优先选择需要执行时间短的进程。该调度算法不考虑进程的等待时间。每次调度，从就绪队列中选择需要执行时间最短的进程，为其分配CPU，直到该进程阻塞或结束后，才切换下一个执行时间最短的进程。

* 代码：参见[emulate.c](emulate.c)
* 输入数据：参见[emulate.txt](emulate.txt)

### 代码思路

1. 初始化进程块数组
2. 对进程根据服务时间长度及状态进行排序
3. 使用指针变量模拟进程占用CPU，在每一次循环中对状态进行刷新
4. 反复2-3的操作，直到所有进程完成，结束程序

### 运行结果

```c
# 该进程调度算法可以输出各关键时间节点的所有进程状态，目前时间仅支持整数 #
请输入进程数：请依次输入 进程名 到达时间 服务时间（如：A 0 3)

* Tick: 0
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process1	3.000000	1.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA
process3	1.000000	2.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA

* Tick: 1
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process3	1.000000	2.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process1	3.000000	1.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA

* Tick: 2
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	0.000000	0.000000	Running
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process1	3.000000	1.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	WFA

* Tick: 3
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process3	1.000000	2.000000	2.000000	1.000000	4.000000	0.000000	2.000000	1.000000	Running
process1	3.000000	1.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready

* Tick: 4
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process1	3.000000	1.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 5
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	0.000000	0.000000	Running
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 6
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process2	2.000000	3.000000	0.000000	0.000000	0.000000	0.000000	0.000000	0.000000	Ready
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	3.000000	3.000000	Finish
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 7
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process2	2.000000	3.000000	7.000000	0.000000	10.000000	0.000000	0.000000	0.000000	Running
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	3.000000	3.000000	Finish
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 8
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process2	2.000000	3.000000	7.000000	2.000000	10.000000	0.000000	6.000000	2.000000	Running
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	3.000000	3.000000	Finish
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 9
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process2	2.000000	3.000000	7.000000	1.000000	10.000000	0.000000	7.000000	2.333333	Running
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	3.000000	3.000000	Finish
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish

* Tick: 10
进程名		到达时间		服务时间		开始时间		还需CPU时间	完成时间		优先级		周转时间		带权周转时间	状态
process1	3.000000	1.000000	5.000000	0.000000	6.000000	0.000000	3.000000	3.000000	Finish
process3	1.000000	2.000000	2.000000	0.000000	4.000000	0.000000	3.000000	1.500000	Finish
process2	2.000000	3.000000	7.000000	0.000000	10.000000	0.000000	8.000000	2.666667	Finish
```
